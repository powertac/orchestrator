<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang="en" xmlns="http://www.w3.org/1999/xhtml"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets">

<h:body>
  <ui:composition template="template.xhtml">
    <ui:define name="content">
      <script type="text/javascript" charset="utf8"
              src="resources/js/account.js"></script>

      <h2>Account for user: #{user.userName}</h2>

      <h:form id="accountForm3" rendered="#{user.isLoggedIn()}">
        <h:panelGrid columns="2" styleClass="left fixed_height">
          <h:outputText value="Institution"/>
          <h:outputText value="#{actionAccount.user.institution}"
                        rendered="#{!actionAccount.user.editingDetails}"/>
          <h:inputText value="#{actionAccount.user.institution}"
                       maxlength="256"
                       rendered="#{actionAccount.user.editingDetails}"/>

          <h:outputText value="Contact name"/>
          <h:outputText value="#{actionAccount.user.contactName}"
                        rendered="#{!actionAccount.user.editingDetails}"/>
          <h:inputText value="#{actionAccount.user.contactName}"
                       maxlength="256"
                       rendered="#{actionAccount.user.editingDetails}"/>

          <h:outputText value="Contact email"/>
          <h:outputText value="#{actionAccount.user.contactEmail}"
                        rendered="#{!actionAccount.user.editingDetails}"/>
          <h:inputText value="#{actionAccount.user.contactEmail}"
                       maxlength="256"
                       rendered="#{actionAccount.user.editingDetails}"/>

          <h:outputText value="Contact phone"/>
          <h:outputText value="#{actionAccount.user.contactPhone}"
                        rendered="#{!actionAccount.user.editingDetails}"/>
          <h:inputText value="#{actionAccount.user.contactPhone}"
                       maxlength="256"
                       rendered="#{actionAccount.user.editingDetails}"/>

          <h:commandButton value="Edit"
                           rendered="#{!actionAccount.user.editingDetails}"
                           action="#{actionAccount.editUserDetails()}"/>
          <h:commandButton value="Save"
                           rendered="#{actionAccount.user.editingDetails}"
                           action="#{actionAccount.saveUserDetails()}"/>
          <h:panelGroup/>

          <br/>
        </h:panelGrid>
      </h:form>

      <h:form rendered="#{user.isGuest()}">
        <h3>Insufficient Permissions, redirecting in 10 seconds</h3>
        <meta http-equiv="REFRESH" content="10;url=login.xhtml"/>
      </h:form>
    </ui:define>
  </ui:composition>
</h:body>
</html>